<% provide(:title, current_site.sitename + " " + @sport.name + ' - ' + @athlete.full_name) %>
<p>
<div class="row">
	<div class="col-xs-2">
		<% if @athlete.pic? %> 
			<%= image_tag @athlete.pic.url(:thumb), class: "img-responsive" %>
		<% else %>
			<%= image_tag 'Photo_Not_Available.jpg', class: "img-responsive" %>
		<% end %>
	</div>
	<div class="col-xs-4">
		<em><h4>Display stats for: <%= link_to @athlete.full_name, sport_athlete_path(@sport, @athlete) %></h4></em>
	</div>
	<% if site_owner? or isTeamManager?(@athlete) %>
		<div class="col-xs-4">
			<%= form_tag selectedstat_sport_athlete_path(sport_id: @sport, athlete_id: @athlete), class: "form-horizontal", method: 'put' do %>
				<%= render 'shared/error_messages', object: @athlete %>
			            <%= label_tag "Select Stats: " %>
			            <%= select_tag "selectedstat", options_for_select(@statlist), class: 'form-control' %>
				<p>
				<div class="row">
					<div class="col-xs-1 col-xs-offset-2">
						<%= submit_tag 'Submit', class:	"btn btn-sm btn-primary" %>
					</div>
				</div>
			<% end %>
		</div>
	<% end %>
</div>
<% if isPasser?(@passingtotals) or isRusher?(@rushingtotals) or isReceiver?(@receivingtotals) or isDefense?(@defensivetotals) or 
		isKicker?(@kickofftotals) or isPunter?(@puntertotals) or isPlaceKicker?(@placekickertotals) or isPuntReturner?(@returnertotals) or
		isKOReturner?(@returnertotals) or isKicker?(@kickofftotals) %>
	<div class="row">
		<div class="col-xs-11">
			<% if isPasser?(@passingtotals) %>
					<h5>Passing</h5>
					<table class="table table-bordered">
					  	<%= render 'football_passings/stat_header', name: "Player" %>

					  	<% @passingstats.each do |p| %>
					  		<% if isPasser?(p) %>
								<%= render 'football_passings/stat_body', stat: p, player: @athlete, name: @player %>
							<% end %>
						<% end %>
						<%= render 'football_passings/stat_body', stat: @passingtotals, player: Athlete.find(@passingtotals.athlete_id), 
									name: "Totals" %>
					</table>

				  	<p>
			<% end %>

			<% if isRusher?(@rushingtotals) %>
			  	<h5>Rushing</h5>
				<table class="table table-bordered">
				  	<%= render 'football_rushings/stat_header', name: "Player" %>

				  	<% @rushingstats.each do |p| %>
					  	<% if p.attempts > 0 %>
							<%= render 'football_rushings/stat_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_rushings/stat_body', stat: @rushingtotals, player: Athlete.find(@rushingtotals.athlete_id), name: "Totals" %>
				</table>

			  	<p>
			<% end %>

			<% if isReceiver?(@receivingtotals) %>
			  	<h5>Receiving</h5>
				<table class="table table-bordered">
				  	<%= render "football_receivings/stat_header", name: "Player" %>

				  	<% @receivingstats.each do |p| %>
				  		<% if p.receptions > 0 %>
							<%= render 'football_receivings/stat_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_receivings/stat_body', stat: @receivingtotals, player: Athlete.find(@receivingtotals.athlete_id), name: "Totals" %>
				</table>
				<p>
			<% end %>

			<% if isDefense?(@defensivetotals) %>
			  	<h5>Defense</h5>
				<table class="table table-bordered">
				  	<%= render "football_defenses/stat_header", name: "Player" %>

				  	<% @defensivestats.each do |p| %>
				  		<% if p.tackles > 0 or p.assists > 0 or p.pass_defended > 0 or p.sacks > 0 or p.interceptions > 0 or p.fumbles_recovered > 0 or 
				  			p.safety > 0 %>
							<%= render 'football_defenses/stat_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_defenses/stat_body', stat: @defensivetotals, player: Athlete.find(@defensivetotals.athlete_id), name: "Totals" %>
				</table>
				<p>
			<% end %>

			<% if isPlaceKicker?(@placekickertotals) %>
			  	<h5>Place Kicker Stats</h5>
				<table class="table table-bordered">
				  	<%= render "football_place_kickers/fieldgoal_header", name: "Player" %>

				  	<% @placekickerstats.each do |p| %>
					  	<% if p.fgattempts > 0 %>
							<%= render 'football_place_kickers/fieldgoal_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_place_kickers/fieldgoal_body', stat: @placekickertotals, player: Athlete.find(@placekickertotals.athlete_id), name: "Totals" %>
				</table>

				<table class="table table-bordered">
				   	<%= render "football_place_kickers/extrapoint_header", name: "Player" %>

				  	<% @placekickerstats.each do |p| %>
				  		<% if p.xpattempts > 0 %>
							<%= render 'football_place_kickers/extrapoint_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_place_kickers/extrapoint_body', stat: @placekickertotals, player: Athlete.find(@placekickertotals.athlete_id), name: "Totals" %>
				</table>
				<p>
			<% end %>

			<% if isPuntReturner?(@returnertotals) %>
			  	<h5>Punt Returns</h5>
				<table class="table table-bordered">
				  	<%= render "football_returners/puntreturn_header", name: "Player" %>

				  	<% @returnerstats.each do |p| %>
				  		<% if p.punt_return > 0 %>
							<%= render 'football_returners/puntreturn_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_returners/puntreturn_body', stat: @returnertotals, player: Athlete.find(@returnertotals.athlete_id), name: "Totals" %>
				</table>
				<p>
			<% end %>

			<% if isKOReturner?(@returnertotals) %>
			  	<h5>Kickoff Returns</h5>
				<table class="table table-bordered">
				  	<%= render "football_returners/koreturn_header", name: "Player" %>

				  	<% @returnerstats.each do |p| %>
				  		<% if p.koreturns > 0 %>
							<%= render 'football_returners/koreturn_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_returners/koreturn_body', stat: @returnertotals, player: Athlete.find(@returnertotals.athlete_id), name: "Totals" %>
				</table>
				<p>
			<% end %>

			<% if isKicker?(@kickofftotals) %>
			  	<h5>Kickoffs</h5>
				<table class="table table-bordered">
				  	<%= render "football_kickers/stat_header", name: "Player" %>

				  	<% @kickoffstats.each do |p| %>
				  		<% if p.koattempts > 0 %>
							<%= render 'football_kickers/stat_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_kickers/stat_body', stat: @kickofftotals, player: Athlete.find(@kickofftotals.athlete_id), name: "Totals" %>
				</table>
				<p>
			<% end %>

			<% if isPunter?(@puntertotals) %>
			  	<h5>Punters</h5>
				<table class="table table-bordered">
				  	<%= render "football_punters/stat_header", name: "Player" %>

				  	<% @punterstats.each do |p| %>
				  		<% if p.punts > 0 %>
							<%= render 'football_punters/stat_body', stat: p, player: @athlete, name: @player %>
						<% end %>
					<% end %>
					<%= render 'football_punters/stat_body', stat: @puntertotals, player: Athlete.find(@puntertotals.athlete_id), name: "Totals" %>
				</table>
			<% end %>
		</div>
	</div>
<% else %>
<div class="row">
	<div class="col-xs-4">
		<div id="nostats-responsive" class="modal-dialog" tabindex="-1" data-width="760" style="display: none;">
		  <div class="modal-header">
		    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
		    <h4 class="modal-title">No Stats</h4>
		  </div>
		  <div class="modal-body">
		    <div class="row">
		      <div class="col-md-4">
		        <div class="well">
		          <p class="text-info">No stats for player <%=@athlete.full_name %></p>
		        </div>
		      </div>
		    </div>
		  </div>
		  <div class="modal-footer">
		    <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
		  </div>
		</div>
	</div>
</div>
<% end %>
<script>
	$("#nostats-responsive").modal('show');
</script>