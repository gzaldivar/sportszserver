<% provide(:title, current_site.sitename + " " + @sport.sportname + " - Schedule Details") %>
<p>
<div class="row">
  	<div class="span9 offset1">
		<h4>
       		Date: <%= @gameschedule.gamedate.strftime("%m/%d/%Y") %>
       		<p>
     		<%= @team.title + " " + @team.mascot %>
     		vs.
      		<%= @gameschedule.opponent %> at 
      		<em><%= @gameschedule.location %></em>
      		<p>
      		Game time: <%= @gameschedule.starttime.strftime("%I:%M%p") %>
      		<%= @gameschedule.event %>
  		</h4>
  		<% if @sport.sportname == "Basketball" %>
	  		<h4>Real Time Game Summary:</h4>
  			<h3>
  			<div class="row">
  				<div class="span3">
  					<%= @team.team_name %>
  				</div>
  				<div class="span1 offset1">
  					Clock
  				</div>
  				<div class="span3 offset1">
  					<%= @gameschedule.opponent_name %>
  				</div>
  			</div>
  			</h3>
  			<h1><font color="blue">
  			<div class="row">
  				<div class="span3">
  					<%= @gameschedule.homescore %>
  				</div>
  				<div class="span1 offset1">
  					<%= @gameschedule.livegametime.strftime("%I:%M") %>
  				</div>
  				<div class="span3 offset1">
  					<%= @gameschedule.opponentscore %>
  				</div>
  			</div>
  			</font></h1>
  			<div class="row">
  				<div class="span3">
  					<table class="table table-bordered">
  						<thead>
		  					<th>Fouls</th>
		  					<% if @gameschedule.homebonus %>
		  						<th>Bonus</th>
		  					<% end %>
		  					<th>Time Outs</th>
		  				</thead>
		  				<tbody>
		  					<td><%= @gameschedule.homefouls %></td>
		  					<% if @gameschedule.homebonus %>
		  						<td><strong><font color="red">Bonus</font></strong></td>
		  					<% end %>
		  					<td><%= @gameschedule.hometimeouts %></td>
		  				</tbody>
  					</table>
  				</div>
  				<div class="span1 offset1">
  					<table class="table table-bordered">
  						<thead>
		  					<th>Period</th>
		  				</thead>
		  				<tbody>
		  					<td><%= @gameschedule.currentperiod %></td>
		  				</tbody>
		  			</table>
  				</div>
  				<div class="span3 offset1">
  					<table class="table table-bordered">
  						<thead>
		  					<th>Fouls</th>
		  					<% if @gameschedule.visitorbonus %>
		  						<th>Bonus</th>
		  					<% end %>
		  					<th>Time Outs</th>
		  				</thead>
		  				<tbody>
		  					<td><%= @gameschedule.opponentfouls %></td>
		  					<% if @gameschedule.visitorbonus %>
		  						<td><strong><font color="red">Bonus</font></strong></td>
		  					<% end %>
		  					<td><%= @gameschedule.opponenttimeouts %></td>
		  				</tbody>
  					</table>
  				</div>
  			</div>
  			<table class="table table-bordered">
  				<thead>
  					<th>Game Time</th>
  					<th>Possession</th>
  					<th>Possession Arrow</th>
  				</thead>
  				<tbody>
  					<td><%= @gameschedule.livegametime.strftime("%I:%M") %></td>
  					<td><%= @gameschedule.possession %></td>
  					<td><%= @gameschedule.bballpossessionarrow %></td>
  				</tbody>
  			</table>
  			<%= render 'basketball_stats/stats', bballstats: @stats, name: "Player" %>
  		<% end %>
  		<% if @sport.sportname == "Football" %>
			<h4>Scoring Summary</h4>
	  		<table class="table table-bordered">
      			<p>
					<%= render "quarters" %>
		  	</table>
  		<% end %>
	  	<% if @sport.sportname == "Football" and !@gameschedule.current_game_time.nil? %>
		  	<h4>Real Time Game Summary:</h4>
  			<table class="table table-bordered">
  				<thead>
  					<th>Game Time</th>
  					<th>Possession</th>
  					<th>Down</th>
  					<th>To go</th>
  					<th>Ball On</th>
  				</thead>
  				<tbody>
  					<td><%= @gameschedule.livegametime.strftime("%I:%M") %></td>
  					<td><%= @gameschedule.possession %></td>
  					<td><%= @gameschedule.down %></td>
  					<td><%= @gameschedule.togo %></td>
  					<td><%= @gameschedule.our + " " + @gameschedule.ballon.to_s %></td>
  				</tbody>
  			</table>
  			<em><strong>Last Play:</strong></em>
  			<div class="row">
  				<div class="span8">
  					<%= @gameschedule.lastplay %>
  				</div>
  			</div>
		  	<h4>First Down/Penalties</h4>
		  	<table class="table table-bordered">
		  		<thead>
		  			<th>First Downs</th>
		  			<th>Penalties</th>
		  			<th>Penalty Yards</th>
		  		</thead>
		  		<tbody>
		  			<td><%= @gameschedule.firstdowns %></td>
		  			<td><%= @gameschedule.penalty %></td>
		  			<td><%= @gameschedule.penaltyyards %></td>
		  		</tbody>
		  	</table>
		<% end %>
		<p>
	  	<% if isAdmin? or isTeamManager?(@gameschedule) %>
	  		<div class="center">
	  			<%= link_to "Edit", edit_sport_team_gameschedule_path(@sport, @team, @gameschedule), 
	  					class: "btn btn-medium btn-warning" %>
	  			<%= link_to "Delete", [@sport, @team, @gameschedule],  method:	:delete, class: "btn btn-medium btn-danger",
	  			 		data: { confirm: "You sure?" } %>
				<%= link_to "Add", new_sport_team_gameschedule_path(@sport, @team), class: "btn btn-primary" %>	
			</div>
		<% end %>	  	
	  	<p>
	  	<% if @sport.sportname == "Football" %>
		  	<h4><em>Game Log</em></h4>
		  	<p>
			<% @gamelogs.each do |g| %>
				<div class="row">
					<div class="span8">
					 	<%= g.logentrytext %>
					 	<% if isAdmin? or isTeamManager?(@gameschedule) %>
					 		<%= link_to "Edit", edit_sport_team_gameschedule_gamelog_path(@sport, @team, @gameschedule, g), class: "btn btn-mini btn-warning" %>
					 		<%= link_to "Delete", [@sport, @team, @gameschedule, g], method: :delete,
					 					class: "btn btn-mini btn-danger", data: { confirm: "You sure?" } %>
					 	<% end %>
					 </div>
				</div>
			<% end %>
			<% if isAdmin? or isTeamManager?(@gameschedule) %>
			  	Enter score entry. Scoring entries will be ordered first to last by time.</h6><br/>
		  		<em>Score entries are added automatically when you add scoring stats and automatically computed . You can override the and edit the entries below.</em>
		  		<h5>Be careful entering game log data using this form. If you update a log entry your stats can get out of sync. If you want to edit an existing log entry, it is much better to delete the entry and update the stats for the players involved in the score. The system will automatically generate a new log. If you want to enter a new log entry, you should update the stats for the players involved and let the system generate the log entry.</h5>
		  		<%= render "gamelogs/gamelog_form" %>
		  		<br>
		  		<h5>Example of resulting log entry: "Q2: 03:57 - C. Zaldivar 25 yard pass to J. Cody - TD"</h5>
			<% end %>
			<% if !@stats.nil? %>
			  	<p>
			  	<h4><em>Game Statistics</em></h4>
			  	<p>
			  	<h5>Passing</h5>
				<%= render 'passing', passing: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Rushing</h5>
				<%= render 'rushing', rushing: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Receiving</h5>
				<%= render 'receiving', receiving: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Defense</h5>
				<%= render 'defense', defense: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Special Teams Placekicking</h5>
				<%= render 'placekicker', specialteam: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Special Teams Kickoff</h5>
				<%= render 'kickoff', specialteam: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Special Teams Punts</h5>
				<%= render 'punter', specialteam: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Special Teams Punt Returns</h5>
				<%= render 'puntreturn', specialteam: @stats, ath_totals: @ath_totals %>
			  	<p>
			  	<h5>Special Teams Kickoff Returns</h5>
				<%= render 'kickoffreturn', specialteam: @stats, ath_totals: @ath_totals %>
			<% end %>
		<% end %>
	</div>
</div>